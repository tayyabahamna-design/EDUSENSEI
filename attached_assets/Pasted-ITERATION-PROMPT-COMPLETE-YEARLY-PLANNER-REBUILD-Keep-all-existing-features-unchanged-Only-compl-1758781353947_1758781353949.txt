ITERATION PROMPT - COMPLETE YEARLY PLANNER REBUILD:
Keep all existing features unchanged. Only completely rebuild the YEARLY PLANNER to work properly:
YEARLY PLANNER - COMPLETE WORKING SYSTEM
STEP 1 - PLANNER OPENS CORRECTLY
javascriptCopyfunction openYearlyPlanner() {
    // Hide all other sections
    document.getElementById('dashboard').style.display = 'none';
    document.getElementById('gradingBuddy').style.display = 'none';
    document.getElementById('chatbot').style.display = 'none';
    
    // Show planner
    document.getElementById('yearlyPlanner').style.display = 'block';
    
    // Load planner interface
    loadPlannerInterface();
}

function loadPlannerInterface() {
    document.getElementById('yearlyPlanner').innerHTML = `
        <div class="planner-container">
            <h2>üìÖ Yearly Planner</h2>
            
            <div class="step-1">
                <h3>Step 1: Select Your Teaching Details</h3>
                
                <div class="selection-area">
                    <label>Select Grade:</label>
                    <select id="teacherGrade">
                        <option value="">Choose Grade</option>
                        <option value="1">Grade 1</option>
                        <option value="2">Grade 2</option>
                        <option value="3">Grade 3</option>
                        <option value="4">Grade 4</option>
                        <option value="5">Grade 5</option>
                    </select>
                    
                    <label>Select Your Subjects:</label>
                    <div class="subject-checkboxes">
                        <input type="checkbox" id="english" value="English"> English<br>
                        <input type="checkbox" id="math" value="Math"> Math<br>
                        <input type="checkbox" id="urdu" value="Urdu"> Urdu<br>
                        <input type="checkbox" id="islamiyat" value="Islamiyat"> Islamiyat<br>
                        <input type="checkbox" id="science" value="Science"> Science<br>
                        <input type="checkbox" id="social" value="Social Studies"> Social Studies<br>
                        <input type="checkbox" id="gk" value="General Knowledge"> General Knowledge<br>
                    </div>
                    
                    <button onclick="createWeeklyTemplate()" class="next-btn">Create Weekly Template</button>
                </div>
            </div>
            
            <div id="weeklyTemplate" style="display:none;"></div>
        </div>
    `;
}
STEP 2 - WEEKLY TEMPLATE CREATION
javascriptCopyfunction createWeeklyTemplate() {
    const selectedGrade = document.getElementById('teacherGrade').value;
    const selectedSubjects = [];
    
    // Get selected subjects
    const checkboxes = document.querySelectorAll('.subject-checkboxes input:checked');
    checkboxes.forEach(cb => selectedSubjects.push(cb.value));
    
    if (!selectedGrade || selectedSubjects.length === 0) {
        alert('Please select grade and at least one subject!');
        return;
    }
    
    // Show weekly template builder
    const templateDiv = document.getElementById('weeklyTemplate');
    templateDiv.style.display = 'block';
    templateDiv.innerHTML = `
        <h3>Step 2: Create Your Weekly Schedule</h3>
        <p>Grade: ${selectedGrade} | Subjects: ${selectedSubjects.join(', ')}</p>
        
        <div class="weekly-schedule">
            ${createDaySchedule('Monday', selectedSubjects)}
            ${createDaySchedule('Tuesday', selectedSubjects)}
            ${createDaySchedule('Wednesday', selectedSubjects)}
            ${createDaySchedule('Thursday', selectedSubjects)}
            ${createDaySchedule('Friday', selectedSubjects)}
        </div>
        
        <button onclick="copyToYear()" class="copy-btn">üìÖ Copy This Week to Entire Year</button>
    `;
}

function createDaySchedule(day, subjects) {
    return `
        <div class="day-schedule">
            <h4>${day}</h4>
            <div class="periods">
                <select id="${day}_period1">
                    <option value="">Period 1 (8:00-8:40)</option>
                    ${subjects.map(s => `<option value="${s}">${s}</option>`).join('')}
                </select>
                
                <select id="${day}_period2">
                    <option value="">Period 2 (8:40-9:20)</option>
                    ${subjects.map(s => `<option value="${s}">${s}</option>`).join('')}
                </select>
                
                <select id="${day}_period3">
                    <option value="">Period 3 (9:20-10:00)</option>
                    ${subjects.map(s => `<option value="${s}">${s}</option>`).join('')}
                </select>
                
                <p>Break: 10:00-10:20</p>
                
                <select id="${day}_period4">
                    <option value="">Period 4 (10:20-11:00)</option>
                    ${subjects.map(s => `<option value="${s}">${s}</option>`).join('')}
                </select>
                
                <select id="${day}_period5">
                    <option value="">Period 5 (11:00-11:40)</option>
                    ${subjects.map(s => `<option value="${s}">${s}</option>`).join('')}
                </select>
            </div>
        </div>
    `;
}
STEP 3 - COPY TO ENTIRE YEAR
javascriptCopyfunction copyToYear() {
    // Get weekly schedule
    const weeklySchedule = {};
    const days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday'];
    
    days.forEach(day => {
        weeklySchedule[day] = {
            period1: document.getElementById(`${day}_period1`).value,
            period2: document.getElementById(`${day}_period2`).value,
            period3: document.getElementById(`${day}_period3`).value,
            period4: document.getElementById(`${day}_period4`).value,
            period5: document.getElementById(`${day}_period5`).value
        };
    });
    
    // Save to storage
    localStorage.setItem('yearlyPlan', JSON.stringify({
        schedule: weeklySchedule,
        createdDate: new Date().toISOString()
    }));
    
    // Show success and yearly view
    alert('‚úÖ Weekly plan copied to entire year! You can edit any day individually.');
    showYearlyCalendar();
}

function showYearlyCalendar() {
    document.getElementById('yearlyPlanner').innerHTML += `
        <div class="yearly-calendar">
            <h3>üìÖ Your Yearly Schedule</h3>
            <p>Click any week to edit individual days:</p>
            
            <div class="calendar-grid">
                <div class="week" onclick="editWeek(1)">Week 1 ‚úèÔ∏è</div>
                <div class="week" onclick="editWeek(2)">Week 2 ‚úèÔ∏è</div>
                <div class="week" onclick="editWeek(3)">Week 3 ‚úèÔ∏è</div>
                <!-- Continue for 52 weeks -->
            </div>
        </div>
    `;
}
TEST STEPS:

Click "Yearly Planner" ‚Üí Should show Step 1 (Grade + Subject selection)
Select grade and subjects ‚Üí Click "Create Template" ‚Üí Should show Step 2 (Weekly schedule)
Fill weekly schedule ‚Üí Click "Copy to Year" ‚Üí Should create yearly plan

Make this planner simple and functional!
Keep all other app features unchanged.