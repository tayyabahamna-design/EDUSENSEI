{% extends "base.html" %}

{% block title %}Grading - Tutor's Assistant{% endblock %}

{% block content %}
<div class="grading-page">
    <h1>Smart Grading & Assessments</h1>
    <div class="date-info">
        <h2>Date: {{ today }}</h2>
    </div>
    
    <div class="grading-section">
        <h3>Student List</h3>
        {% if students %}
            <div class="student-grading-list">
                {% for student in students %}
                    <div class="student-grading-item">
                        <div class="student-info">
                            <h4>{{ student }}</h4>
                            {% if today_grades.get(student) %}
                                <div class="grade-result">
                                    <span class="score">{{ today_grades[student].score }}/100</span>
                                    <span class="timestamp">Graded at: {{ today_grades[student].timestamp }}</span>
                                    <span class="method">{{ today_grades[student].method }}</span>
                                </div>
                            {% else %}
                                <span class="not-graded">Not graded today</span>
                            {% endif %}
                        </div>
                        
                        <div class="grading-actions">
                            <form method="POST" action="{{ url_for('grade_student') }}">
                                <input type="hidden" name="student_name" value="{{ student }}">
                                <button type="button" class="btn btn-secondary upload-btn">
                                    ðŸ“¸ Upload Work Photo
                                </button>
                                <button type="submit" class="btn btn-primary grade-btn">
                                    ðŸ¤– AI Grade Work
                                </button>
                            </form>
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <p class="no-students">No students in roster. Add students in the Attendance section first.</p>
        {% endif %}
    </div>
    
    <div class="quick-actions">
        <a href="{{ url_for('quiz_generator') }}" class="btn btn-secondary">Generate Quiz/Screener</a>
    </div>
</div>

<script>
document.querySelectorAll('.upload-btn').forEach(button => {
    button.addEventListener('click', function() {
        alert('Photo upload feature coming soon! For now, use the AI Grade Work button to simulate grading.');
    });
});
</script>
{% endblock %}