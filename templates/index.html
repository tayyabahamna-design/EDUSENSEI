{% extends "base.html" %}

{% block title %}AI Teaching Assistant{% endblock %}

{% block content %}
<div class="dashboard">
    <div class="welcome-section">
        <h1>ğŸ¤–âœ¨ AI Assistant ğŸ’–</h1>
        <p>ğŸŒŸ Your helpful, knowledgeable companion! Chat with AI using voice, text, images, and documents for any task! ğŸ€ğŸ“š</p>
    </div>
    
    <div class="feature-grid">
        <div class="feature-card large-card">
            <div class="feature-icon">ğŸ¤–ğŸ’¬</div>
            <h3>ğŸ’– Smart AI Conversation</h3>
            <p>Chat naturally with AI using text messages, voice recordings, images, and documents! Get help with coding, writing, analysis, creative tasks, and any questions you have! ğŸŒˆâœ¨</p>
            <div class="feature-highlights">
                <div class="highlight">ğŸ—£ï¸ Voice Messages</div>
                <div class="highlight">ğŸ“ File Uploads</div>
                <div class="highlight">ğŸ–¼ï¸ Image Analysis</div>
                <div class="highlight">ğŸ“„ Document Processing</div>
            </div>
            <a href="{{ url_for('chatbot') }}" class="btn btn-primary btn-large">ğŸ¤– Start Chatting Now!</a>
        </div>
        
        <div class="feature-card">
            <div class="feature-icon">ğŸ¯</div>
            <h3>ğŸŒŸ Key Features</h3>
            <div class="feature-list">
                <div class="feature-item">ğŸ’» Coding Help</div>
                <div class="feature-item">âœï¸ Writing Assistance</div>
                <div class="feature-item">ğŸ§® Math & Analysis</div>
                <div class="feature-item">ğŸ¨ Creative Tasks</div>
                <div class="feature-item">ğŸ” Research Help</div>
                <div class="feature-item">âœ¨ And Much More!</div>
            </div>
        </div>
        
        <div class="feature-card">
            <div class="feature-icon">âš¡</div>
            <h3>ğŸ“Š Quick Assessments</h3>
            <p>Generate instant assessment tools for your classroom! Get ready-made questions, activities, and evaluation methods in seconds! ğŸš€</p>
            <div class="assessment-buttons">
                <button class="btn btn-assessment" onclick="generateAssessment('qna')">â“ Quick Q&A</button>
                <button class="btn btn-assessment" onclick="generateAssessment('mcq')">ğŸ”¤ Multiple Choice</button>
                <button class="btn btn-assessment" onclick="generateAssessment('comprehension')">ğŸ“– Short Comprehension</button>
                <button class="btn btn-assessment" onclick="generateAssessment('thumbs')">ğŸ‘ğŸ‘ Thumbs Up/Down</button>
                <button class="btn btn-assessment" onclick="generateAssessment('statements')">ğŸ“ True/False Statements</button>
                <button class="btn btn-assessment" onclick="generateAssessment('fill-blanks')">âœï¸ Fill in the Blanks</button>
                <button class="btn btn-assessment" onclick="generateAssessment('exit-ticket')">ğŸ« Exit Tickets</button>
            </div>
        </div>
    </div>
</div>

<!-- Assessment Modal -->
<div id="assessmentModal" class="assessment-modal">
    <div class="assessment-modal-content">
        <span class="assessment-close" onclick="closeAssessmentModal()">&times;</span>
        <h2 id="assessmentTitle">ğŸ¯ Quick Assessment</h2>
        <div id="assessmentContent" class="assessment-content">
            <!-- Assessment content will be loaded here -->
        </div>
    </div>
</div>

<script>
function generateAssessment(type) {
    const modal = document.getElementById('assessmentModal');
    const title = document.getElementById('assessmentTitle');
    const content = document.getElementById('assessmentContent');
    
    // Show loading
    content.innerHTML = '<p>ğŸ”„ Generating assessment...</p>';
    modal.style.display = 'block';
    
    // Generate content based on type
    let assessmentData = {};
    switch(type) {
        case 'qna':
            assessmentData = generateQnAAssessment();
            title.textContent = 'â“ Quick Q&A Assessment';
            break;
        case 'thumbs':
            assessmentData = generateThumbsAssessment();
            title.textContent = 'ğŸ‘ğŸ‘ Thumbs Up/Down Assessment';
            break;
        case 'statements':
            assessmentData = generateStatementsAssessment();
            title.textContent = 'ğŸ“ True/False Statements';
            break;
        case 'exit-ticket':
            assessmentData = generateExitTicketAssessment();
            title.textContent = 'ğŸ« Exit Ticket Assessment';
            break;
        case 'mcq':
            assessmentData = generateMCQAssessment();
            title.textContent = 'ğŸ”¤ Multiple Choice Questions (MCQ)';
            break;
        case 'comprehension':
            assessmentData = generateComprehensionAssessment();
            title.textContent = 'ğŸ“– Short Comprehension Questions';
            break;
        case 'fill-blanks':
            assessmentData = generateFillBlanksAssessment();
            title.textContent = 'âœï¸ Fill in the Blanks';
            break;
    }
    
    // Display the assessment
    setTimeout(() => {
        content.innerHTML = assessmentData.html;
    }, 500);
}

function generateQnAAssessment() {
    const questions = [
        { q: "What is the main idea of today's lesson?", a: "Accept answers that demonstrate understanding of the key concept" },
        { q: "Can you give me an example of what we learned?", a: "Look for real-world applications or connections" },
        { q: "What was the most interesting part of the lesson?", a: "Helps gauge engagement and memorable moments" },
        { q: "Is there anything you'd like to know more about?", a: "Identifies areas for follow-up or extension" },
        { q: "How would you explain this to a friend?", a: "Tests ability to communicate understanding clearly" }
    ];
    
    let html = '<p><strong>Instructions:</strong> Use these questions to quickly assess student understanding. Mix and match based on your lesson!</p>';
    
    questions.forEach((item, index) => {
        html += `
            <div class="assessment-item">
                <h4>Question ${index + 1}:</h4>
                <p><strong>${item.q}</strong></p>
                <div class="assessment-answer">ğŸ’¡ Look for: ${item.a}</div>
            </div>
        `;
    });
    
    return { html };
}

function generateThumbsAssessment() {
    const statements = [
        "I understand today's main concept",
        "I can explain this to someone else", 
        "I feel confident about this topic",
        "I need more practice with this",
        "I found today's lesson interesting",
        "I can see how this connects to real life"
    ];
    
    let html = '<p><strong>Instructions:</strong> Read each statement and have students show thumbs up (agree) or thumbs down (disagree). Great for quick class pulse checks!</p>';
    
    statements.forEach((statement, index) => {
        html += `
            <div class="assessment-item">
                <h4>Statement ${index + 1}:</h4>
                <p><strong>"${statement}"</strong></p>
                <div class="assessment-answer">ğŸ‘ Thumbs Up = Agree | ğŸ‘ Thumbs Down = Disagree</div>
            </div>
        `;
    });
    
    return { html };
}

function generateStatementsAssessment() {
    const statements = [
        { statement: "Plants need sunlight to make their own food", answer: "TRUE", explanation: "Photosynthesis requires sunlight" },
        { statement: "All insects have 8 legs", answer: "FALSE", explanation: "Insects have 6 legs, spiders have 8" },
        { statement: "Water freezes at 0 degrees Celsius", answer: "TRUE", explanation: "This is the freezing point of water" },
        { statement: "The Earth is flat", answer: "FALSE", explanation: "The Earth is round/spherical" },
        { statement: "Reading helps improve vocabulary", answer: "TRUE", explanation: "Exposure to new words through reading expands vocabulary" }
    ];
    
    let html = '<p><strong>Instructions:</strong> Read each statement and have students write T (True) or F (False). Perfect for science and general knowledge!</p>';
    
    statements.forEach((item, index) => {
        html += `
            <div class="assessment-item">
                <h4>Statement ${index + 1}:</h4>
                <p><strong>"${item.statement}"</strong></p>
                <div class="assessment-answer">âœ… Answer: ${item.answer} - ${item.explanation}</div>
            </div>
        `;
    });
    
    return { html };
}

function generateExitTicketAssessment() {
    const prompts = [
        { prompt: "Today I learned...", purpose: "Identifies key takeaways" },
        { prompt: "I'm still wondering about...", purpose: "Reveals areas of confusion" },
        { prompt: "One thing I want to remember is...", purpose: "Highlights most important learning" },
        { prompt: "I can use this when...", purpose: "Shows real-world connections" },
        { prompt: "My favorite part was...", purpose: "Gauges engagement and interest" }
    ];
    
    let html = '<p><strong>Instructions:</strong> Choose 2-3 prompts for students to complete before leaving class. Perfect for reflection and feedback!</p>';
    
    prompts.forEach((item, index) => {
        html += `
            <div class="assessment-item">
                <h4>Exit Ticket Prompt ${index + 1}:</h4>
                <p><strong>"${item.prompt}"</strong></p>
                <div class="assessment-answer">ğŸ¯ Purpose: ${item.purpose}</div>
            </div>
        `;
    });
    
    return { html };
}

function generateMCQAssessment() {
    const questions = [
        { 
            q: "What is the process by which plants make their own food?", 
            options: ["A) Respiration", "B) Photosynthesis", "C) Digestion", "D) Circulation"], 
            answer: "B) Photosynthesis",
            explanation: "Plants use sunlight, water, and carbon dioxide to make food"
        },
        { 
            q: "Which planet is closest to the Sun?", 
            options: ["A) Venus", "B) Earth", "C) Mercury", "D) Mars"], 
            answer: "C) Mercury",
            explanation: "Mercury is the smallest planet and closest to the Sun"
        },
        { 
            q: "What is the main source of energy for Earth?", 
            options: ["A) The Moon", "B) The Sun", "C) Wind", "D) Water"], 
            answer: "B) The Sun",
            explanation: "The Sun provides light and heat energy for Earth"
        },
        { 
            q: "How many continents are there on Earth?", 
            options: ["A) 5", "B) 6", "C) 7", "D) 8"], 
            answer: "C) 7",
            explanation: "The seven continents are Asia, Africa, North America, South America, Antarctica, Europe, and Australia"
        }
    ];
    
    let html = '<p><strong>Instructions:</strong> Read each question and ask students to choose the correct answer. Perfect for testing specific knowledge!</p>';
    
    questions.forEach((item, index) => {
        html += `
            <div class="assessment-item">
                <h4>Question ${index + 1}:</h4>
                <p><strong>${item.q}</strong></p>
                <div class="mcq-options">
                    ${item.options.map(option => `<div class="mcq-option">${option}</div>`).join('')}
                </div>
                <div class="assessment-answer">âœ… Answer: ${item.answer} - ${item.explanation}</div>
            </div>
        `;
    });
    
    return { html };
}

function generateComprehensionAssessment() {
    const passages = [
        {
            passage: "The butterfly starts its life as a tiny egg. Then it becomes a caterpillar that eats lots of leaves. Next, it forms a chrysalis around itself. Finally, it emerges as a beautiful butterfly.",
            questions: [
                { q: "What does the caterpillar eat?", a: "Leaves" },
                { q: "What forms around the caterpillar?", a: "A chrysalis" },
                { q: "What are the four stages mentioned?", a: "Egg, caterpillar, chrysalis, butterfly" }
            ]
        },
        {
            passage: "Rain is very important for our planet. It waters the plants and fills the rivers and lakes. When the sun heats up water, it turns into vapor and goes up into the sky. In the clouds, the vapor turns back into water drops that fall as rain.",
            questions: [
                { q: "Why is rain important?", a: "It waters plants and fills rivers and lakes" },
                { q: "What happens when the sun heats water?", a: "It turns into vapor and goes up into the sky" },
                { q: "Where does vapor turn back into water drops?", a: "In the clouds" }
            ]
        }
    ];
    
    let html = '<p><strong>Instructions:</strong> Read the passage aloud, then ask the comprehension questions. Great for reading and understanding skills!</p>';
    
    passages.forEach((item, passageIndex) => {
        html += `
            <div class="assessment-item">
                <h4>Passage ${passageIndex + 1}:</h4>
                <div class="passage-text">${item.passage}</div>
                <h5>Questions:</h5>
        `;
        
        item.questions.forEach((question, qIndex) => {
            html += `
                <div class="comprehension-question">
                    <p><strong>${qIndex + 1}. ${question.q}</strong></p>
                    <div class="assessment-answer">ğŸ’¡ Expected Answer: ${question.a}</div>
                </div>
            `;
        });
        
        html += `</div>`;
    });
    
    return { html };
}

function generateFillBlanksAssessment() {
    const sentences = [
        { 
            sentence: "The _____ is the center of our solar system.", 
            answer: "Sun",
            hint: "It gives us light and heat"
        },
        { 
            sentence: "Plants need _____, water, and carbon dioxide to make food.", 
            answer: "sunlight/light",
            hint: "Something that comes from the sun"
        },
        { 
            sentence: "The _____ is the largest ocean on Earth.", 
            answer: "Pacific",
            hint: "It's between Asia and America"
        },
        { 
            sentence: "A _____ has three sides and three corners.", 
            answer: "triangle",
            hint: "It's a shape"
        },
        { 
            sentence: "We use our _____ to breathe air into our body.", 
            answer: "lungs",
            hint: "They're inside your chest"
        }
    ];
    
    let html = '<p><strong>Instructions:</strong> Read each sentence and have students fill in the missing word. Give hints if needed!</p>';
    
    sentences.forEach((item, index) => {
        html += `
            <div class="assessment-item">
                <h4>Question ${index + 1}:</h4>
                <p><strong>${item.sentence}</strong></p>
                <div class="fill-blank-hint">ğŸ’¡ Hint: ${item.hint}</div>
                <div class="assessment-answer">âœ… Answer: ${item.answer}</div>
            </div>
        `;
    });
    
    return { html };
}

function closeAssessmentModal() {
    document.getElementById('assessmentModal').style.display = 'none';
}

// Close modal when clicking outside of it
window.onclick = function(event) {
    const modal = document.getElementById('assessmentModal');
    if (event.target == modal) {
        modal.style.display = 'none';
    }
}
</script>

<style>
.large-card {
    grid-column: span 2;
    text-align: center;
}

.feature-highlights {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
    gap: 10px;
    margin: 20px 0;
}

.highlight {
    background: linear-gradient(135deg, #ffb6c1, #ffd700);
    color: #8b4d7a;
    padding: 8px 12px;
    border-radius: 15px;
    font-size: 14px;
    font-weight: 600;
    box-shadow: 0 2px 4px rgba(255, 182, 193, 0.3);
}

.btn-large {
    font-size: 18px;
    padding: 15px 30px;
    margin-top: 20px;
}

.feature-list {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 10px;
    margin-top: 15px;
}

.feature-item {
    background: rgba(255, 255, 255, 0.7);
    padding: 8px 12px;
    border-radius: 8px;
    border: 1px solid #ffb6c1;
    font-size: 14px;
    color: #8b4d7a;
    font-weight: 500;
}

.assessment-buttons {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: 10px;
    margin-top: 15px;
}

.btn-assessment {
    background: linear-gradient(135deg, #87ceeb, #b0e0e6);
    color: #4682b4;
    padding: 10px 12px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-size: 13px;
    font-weight: 600;
    transition: all 0.3s ease;
    box-shadow: 0 2px 4px rgba(135, 206, 235, 0.3);
}

.btn-assessment:hover {
    transform: scale(1.05);
    box-shadow: 0 4px 8px rgba(135, 206, 235, 0.4);
    background: linear-gradient(135deg, #6bb6ff, #87ceeb);
}

/* Assessment Modal Styles */
.assessment-modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.5);
}

.assessment-modal-content {
    background-color: #fefefe;
    margin: 5% auto;
    padding: 20px;
    border: none;
    border-radius: 15px;
    width: 90%;
    max-width: 600px;
    max-height: 80vh;
    overflow-y: auto;
    box-shadow: 0 8px 32px rgba(0,0,0,0.2);
}

.assessment-close {
    color: #aaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
    cursor: pointer;
    line-height: 20px;
}

.assessment-close:hover,
.assessment-close:focus {
    color: #000;
    text-decoration: none;
}

.assessment-content {
    margin-top: 20px;
}

.assessment-item {
    background: rgba(255, 182, 193, 0.1);
    border: 1px solid #ffb6c1;
    border-radius: 8px;
    padding: 15px;
    margin: 10px 0;
}

.assessment-item h4 {
    color: #8b4d7a;
    margin: 0 0 10px 0;
}

.assessment-item p {
    margin: 5px 0;
    color: #333;
}

.assessment-answer {
    background: rgba(255, 215, 0, 0.2);
    border-left: 4px solid #ffd700;
    padding: 8px 12px;
    margin-top: 8px;
    font-weight: 600;
    color: #8b4d7a;
}

/* MCQ Specific Styles */
.mcq-options {
    margin: 10px 0;
}

.mcq-option {
    background: #f8f9fa;
    border: 1px solid #dee2e6;
    border-radius: 5px;
    padding: 8px 12px;
    margin: 5px 0;
    font-weight: 500;
}

/* Comprehension Specific Styles */
.passage-text {
    background: linear-gradient(135deg, #fffacd, #fff8dc);
    border: 2px solid #dda0dd;
    border-radius: 8px;
    padding: 15px;
    margin: 10px 0;
    font-size: 16px;
    line-height: 1.5;
    color: #333;
}

.comprehension-question {
    margin: 10px 0;
    padding-left: 15px;
}

/* Fill in the Blanks Specific Styles */
.fill-blank-hint {
    color: #ff6b6b;
    font-style: italic;
    margin: 5px 0;
    padding: 5px 10px;
    background: linear-gradient(135deg, #ffe4e1, #fff0f5);
    border-radius: 5px;
    border-left: 3px solid #ff6b6b;
}

@media (max-width: 768px) {
    .large-card {
        grid-column: span 1;
    }
    
    .feature-highlights {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .assessment-buttons {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .assessment-modal-content {
        width: 95%;
        margin: 10% auto;
    }
}
</style>
{% endblock %}